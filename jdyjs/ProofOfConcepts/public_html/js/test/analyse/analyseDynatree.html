<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Analyse Dynatree</title>

	<script src="../js/libs/jquery-1.8.0/jquery.js" type="text/javascript"></script>
	<script src="../js/libs/jqueryui-1.9.1/jquery-ui-1.9.1.custom.js" type="text/javascript"></script>
	<script src="../js/libs/jquery-validation-1.10.0/dist/jquery.validate.js" type="text/javascript"></script>
	<!-- jquery.contextmenu,  A Beautiful Site (http://abeautifulsite.net/) -->
	<script src="../../../main/resources/js/libs/jQuery-contextMenu/src/jquery.contextMenu.js" type="text/javascript"></script>
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />

	<link href="../../../main/resources/js/libs/jQuery-contextMenu/src/jquery.contextMenu.css" rel="stylesheet" type="text/css" >
	<link href="../../../main/resources/js/libs/dynatree-1.2.2/src/skin/ui.dynatree.css" rel="stylesheet" type="text/css" id="skinSheet">
	<script src="../../../main/resources/js/libs/dynatree-1.2.2/src/jquery.dynatree.js" type="text/javascript"></script>

	
	
    <script>
		$(function() {

			$.contextMenu({
				selector: '.dynatree-node', 
				build: function($trigger, e) {
					// this callback is executed every time the menu is to be shown
					// its results are destroyed every time the menu is hidden
					// e is the original contextmenu event, containing e.pageX and e.pageY (amongst other data)
					var node = $.ui.dynatree.getNode(this);
					return {
						callback: function(key, options) {
							var m = "clicked: " + key;
							window.console && console.log(m) || alert(m); 
						},
						items: {
							"edit": {name: "Edit", icon: "edit",
								callback: function(key, options) {
									var m = "edited " + key,
										node = $.ui.dynatree.getNode(this);

									window.console && console.log(m + " " + node) || alert(m); 
								}
							},
							"cut": {name: "Cut", icon: "cut",
								callback: function(key, options) {
									var m = "cutted " + key,
										node = $.ui.dynatree.getNode(this);

									window.console && console.log(m + " " + node) || alert(m); 
								}
							},
							"create": {name: "Copy", icon: "copy",
								callback: function(key, options) {
									var m = "created " + key,
										node = $.ui.dynatree.getNode(this);

									window.console && console.log(m + " " + node) || alert(m); 
								}
							},
							"sep1": "---------",
							"quit": {name: "Quit", icon: "quit",
									callback: function(key, options) {
										var m = "quit " + key,
											node = $.ui.dynatree.getNode(this);

										window.console && console.log(m + " " + node) || alert(m); 
									}
							}
						}
					};
				}
			});

			$("#treeId").dynatree({
				onCreate: function (node, span) {
					// alert( span);
				}
				
			});

		});
    </script>	
</head>
<body>
	
	<div id="treeId">
	
		<ul>
		   <li id="key1" title="Look, a tool tip!">item1 with key and tooltip
		   <li id="key2" class="selected">item2: selected on init
		   <li id="key3" class="folder">Folder with some children
			   <ul>
				   <li id="key3.1">Sub-item 3.1
				   <li id="key3.2">Sub-item 3.2
			   </ul>

		   <li id="key4" class="expanded">Document with some children (expanded on init)
			   <ul>
				   <li id="key4.1">Sub-item 4.1
				   <li id="key4.2">Sub-item 4.2
			   </ul>

		   <li id="key5" class="lazy folder">Lazy folder
	   </ul>

	</div>

	<div id="menuId1" class="context-menu-one box menu-1">
		<strong>right click me</strong>
	</div>
</body>
</html>